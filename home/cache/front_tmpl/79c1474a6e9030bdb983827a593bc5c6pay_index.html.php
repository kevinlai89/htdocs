 <div class="handles" style="margin-top:20px;"> <span id="" class="t-handle">已使用 (<?php echo $this->_vars['useNum']; ?>)</span> <span id="" class="t-handle">所有 (<?php echo $this->_vars['allNum']; ?>)</span> </div> <div class="tab-items-wrap" style="padding: 5px; border: 1px solid rgb(221, 221, 221); margin-left: 5px; margin-right: 5px;"> <div class="tab-item"> <div class="tableform"> <!-- 使用量为0时 --> <?php if( $this->_vars['useNum'] == 0 ){ ?> <div style="padding:20px 30px;"> <p> <span style="color:#f60;">支付方式是指顾客在商店购物支付货款的方式。</span><br /> 系统为您集成了在线支付、预存款和线下付款等主流方式，您只需要点击启用即可。 </p> <p> 您还没有选定支付方式,请<span id="view-payment-all" style="font-weight:bold" class="lnk">点此挑选您需要的支付方式。</span> </p> </div> <?php }else{ ?> <!-- 使用量多于0 --> <div class="division"> <table class="gridlist"> <tbody> <?php foreach ((array)$this->_vars['usePay'] as $this->_vars['key'] => $this->_vars['item']){ ?> <tr> <td width="11%" ><img height="25" src="http://esb.shopex.cn/payments/logos/<?php echo $this->_vars['item']['pay_ident']; ?>.gif"></td> <td width="13%"><strong><?php echo $this->_vars['item']['custom_name']; ?></strong></td> <td width="55%"><?php echo $this->_vars['item']['pay_intro']; ?></td> <td> <?php if( $this->_vars['item']['update'] == true ){ ?> <a href="index.php?ctl=trading/payment&act=updateNewPayment&p[0]=<?php echo $this->_vars['item']['pay_ident']; ?>&app_version=<?php echo $this->_vars['item']['version']; ?>&operation_type=update">升级</a> <?php }  if( $this->_vars['item']['exist'] == true ){ ?> <a href="index.php?ctl=trading/payment&act=updateNewPayment&p[0]=<?php echo $this->_vars['item']['pay_ident']; ?>&app_version=<?php echo $this->_vars['item']['version']; ?>&operation_type=repair">修复</a> <?php } ?> <a href="index.php?ctl=trading/payment&act=editPayment&p[0]=<?php echo $this->_vars['item']['id']; ?>&p[1]=<?php echo urlencode($this->_vars['item']['pay_name']); ?>">配置</a> |<a href="index.php?ctl=trading/payment&act=deletePayment&p[0]=<?php echo $this->_vars['item']['id']; ?>&operation_type=delete">删除</a> <?php if( $this->_vars['item']['dis'] == 'false' ){ ?> <a href="index.php?ctl=trading/payment&act=disApp&p[0]=<?php echo $this->_vars['item']['id']; ?>&ident=<?php echo $this->_vars['item']['pay_ident']; ?>&operation_type=stop">停用</a> <?php }else{ ?> <a href="index.php?ctl=trading/payment&act=startApp&p[0]=<?php echo $this->_vars['item']['id']; ?>&ident=<?php echo $this->_vars['item']['pay_ident']; ?>&operation_type=start">启用</a> <?php } ?> </td> </tr> <?php } ?> </tbody> </table> </div> <?php }  if( $this->_vars['useNum']>0 ){ ?> <p style="margin:0 13px 3px;">还需要更多的支付方式,请<span id="view-payment-all" class="lnk">点此挑选。</span></p> <?php } ?> </div> </div> <div class="tab-item"> <?php if( $this->_vars['noData'] == 'true' ){ ?> <div class="tableform"> <div style="text-align: center; padding: 50px;"><h4>对不起，系统正在维护当中，请稍等...</h4></div> </div> <?php }else{ ?> <div class="tableform"> <h4>常用支付方式</h4> <div class="division"> <table class="gridlist"> <tbody> <?php foreach ((array)$this->_vars['allPay'] as $this->_vars['key'] => $this->_vars['item']){  if( $this->_vars['item']['pay_type'] =='common' ){ ?> <tr> <?php $this->_vars["name"]=urlencode($this->_vars['item']['pay_name']); ?> <td width="15%"><img height="25" src="http://esb.shopex.cn/payments/logos/<?php echo $this->_vars['item']['pay_ident']; ?>.gif"></td> <td width="15%"><strong><?php echo $this->_vars['item']['pay_name']; ?></strong></td> <td width="55%"><?php echo $this->_vars['item']['pay_intro']; ?></td> <?php if( $this->_vars['item']['disable'] =='true' ){ ?> <td><button type="button" onclick="<?php echo "W.page('index.php?ctl=trading/payment&act=do_install&p[0]={$this->_vars['item']['pay_ident']}&operation_type=install',{onRequest:function(){window.mainwidth=$('main').getStyle('width')}})";?>" class="btn"><span><span><img src="images/transparent.gif" class="imgbundle icon" style="width:14px;height:14px;background-position:0 -88px;" />启用</span></span></button></td> <?php }else{ ?> <td><button type="button" onclick="<?php echo "W.page('index.php?ctl=trading/payment&act=editPayment&p[0]={$this->_vars['item']['id']}&p[1]={$this->_vars['name']}&p[2]={$this->_vars['item']['pay_ident']}',{onRequest:function(){window.mainwidth=$('main').getStyle('width')}})";?>" class="btn"><span><span><img src="images/transparent.gif" class="imgbundle icon" style="width:14px;height:14px;background-position:0 -88px;" />添加</span></span></button></td> <?php } ?> </tr> <?php }  } ?> </tbody> </table> </div> <h4>国内其他支付方式</h4> <div class="division" id="payment-china" style="overflow-y:auto; overflow-x:hidden; height:280px"> <table class="gridlist"> <tbody> <?php foreach ((array)$this->_vars['allPay'] as $this->_vars['key'] => $this->_vars['item']){  if( $this->_vars['item']['pay_type'] =='china'&& $this->_vars['item']['hidden'] =='false' ){ ?> </tr><?php $this->_vars["name"]=urlencode($this->_vars['item']['pay_name']); ?> <td width="15%"><img height="25" src="http://esb.shopex.cn/payments/logos/<?php echo $this->_vars['item']['pay_ident']; ?>.gif"></td> <td width="15%"><strong><?php echo $this->_vars['item']['pay_name']; ?></strong></td> <td width="56%"><?php echo $this->_vars['item']['pay_intro']; ?></td> <?php if( $this->_vars['item']['disable'] =='true' ){ ?> <td><button type="button" onclick="<?php echo "W.page('index.php?ctl=trading/payment&act=do_install&p[0]={$this->_vars['item']['pay_ident']}&operation_type=install',{onRequest:function(){window.mainwidth=$('main').getStyle('width')}})";?>" class="btn"><span><span><img src="images/transparent.gif" class="imgbundle icon" style="width:14px;height:14px;background-position:0 -88px;" />启用</span></span></button></td> <?php }else{ ?> <td><button type="button" onclick="<?php echo "W.page('index.php?ctl=trading/payment&act=editPayment&p[0]={$this->_vars['item']['id']}&p[1]={$this->_vars['name']}&p[2]={$this->_vars['item']['pay_ident']}',{onRequest:function(){window.mainwidth=$('main').getStyle('width')}})";?>" class="btn"><span><span><img src="images/transparent.gif" class="imgbundle icon" style="width:14px;height:14px;background-position:0 -88px;" />添加</span></span></button></td> <?php } ?> </tr> <?php }  } ?> </table> <div style="text-align:right; margin:5px 0; padding:0 20px;"> <span class="lnk" onclick="new Request.HTML({url:'index.php?ctl=trading/payment&act=index', update:$('payment-china'),data:'china=true'}).post();">查看更多&gt;&gt;</span> </div> </div> <h4>国外常用支付方式</h4> <div class="division" id="payment-other" style="overflow-y:auto; overflow-x:hidden; height:280px"> <table class="gridlist"> <tbody> <?php foreach ((array)$this->_vars['allPay'] as $this->_vars['key'] => $this->_vars['item']){  if( $this->_vars['item']['pay_type'] =='other' && $this->_vars['item']['hidden'] =='false' ){ ?> <tr><?php $this->_vars["name"]=urlencode($this->_vars['item']['pay_name']); ?> <td width="15%"><img height="25" src="http://esb.shopex.cn/payments/logos/<?php echo $this->_vars['item']['pay_ident']; ?>.gif"></td> <td width="15%"><strong><?php echo $this->_vars['item']['pay_name']; ?></strong></td> <td width="56%"><?php echo $this->_vars['item']['pay_intro']; ?></td> <?php if( $this->_vars['item']['disable'] =='true' ){ ?> <td><button type="button" onclick="<?php echo "W.page('index.php?ctl=trading/payment&act=do_install&p[0]={$this->_vars['item']['pay_ident']}&operation_type=install',{onRequest:function(){window.mainwidth=$('main').getStyle('width')}})";?>" class="btn"><span><span><img src="images/transparent.gif" class="imgbundle icon" style="width:14px;height:14px;background-position:0 -88px;" />启用</span></span></button></td> <?php }else{ ?> <td><button type="button" onclick="<?php echo "W.page('index.php?ctl=trading/payment&act=editPayment&p[0]={$this->_vars['item']['id']}&p[1]={$this->_vars['name']}&p[2]={$this->_vars['item']['pay_ident']}',{onRequest:function(){window.mainwidth=$('main').getStyle('width')}})";?>" class="btn"><span><span><img src="images/transparent.gif" class="imgbundle icon" style="width:14px;height:14px;background-position:0 -88px;" />添加</span></span></button></td> <?php } ?> </tr> <?php }  } ?> </tbody> </table> <div style="text-align:right; margin:5px 0; padding:0 20px;"> <span class="lnk" onclick="new Request.HTML({url:'index.php?ctl=trading/payment&act=index', update:$('payment-other'),data:'other=true'}).post();">查看更多&gt;&gt;</span> </div> </div> </div> </div> </div> <?php } ?> <script>
(function(){
  var itemagg = new ItemAgg('.t-handle', '.tab-item');
  $('view-payment-all').addEvent('click', function(){
      itemagg.render(1);
  });

  $ES('.handles .t-handle')[1].addEvent('click',function(e){
        
  })
})();
</script>