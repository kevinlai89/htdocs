<?php if(!function_exists('tpl_function_counter')){ require(CORE_DIR.'/include_v5/smartyplugins/function.counter.php'); } ?><style id="ducegMenu-3-style"> .ducegMenu-3 {width:210px;font-family:"宋体",Arial,Lucida,Verdana,Helvetica,sans-serif;} .dmg3-depth-0 {width:210px;margin:0;height:36px;background:url("<?php echo $this->_plugins['function']['respath'][0]->_respath(array('type' => "widgets",'name' => "duce_goodscat"), $this);?>images/dmg3-icon.gif") no-repeat center 0;overflow:hidden;} .dmg3-depth-0 a.depth-0 {width:160px;color:#fff;height:30px;line-height:22px;font-size:14px;display:block;padding:6px 20px 0 30px;} .dmg3-depth-0 a.depth-0:hover {text-decoration:none;color:#fff;} .ducegMenu-3 .onDmg3 {background-position:0 -38px;} .dmg3-popup0 {position:absolute;z-index:9999;} .dmg3-depth-0 ul.c {*float:left;background:#fef8ef;width:208px;border:1px solid #c40000;border-top:none;border-bottom:none;padding-top:2px;overflow:hidden;} .dmg3-depth-0 li.b {*float:left;width:210px;height:5px;clear:both;background:url("<?php echo $this->_plugins['function']['respath'][0]->_respath(array('type' => "widgets",'name' => "duce_goodscat"), $this);?>images/dmg3-icon.gif") no-repeat 0 -180px;<?php if( $this->_vars['_show'] != 'index' ){ ?>margin-top:-3px;<?php } ?>;} .dmg3-depth-1 {*float:left;width:200px;margin:0 3px;_margin:0 1px 0 2px;height:32px;border-bottom:1px solid #fde6d2;} .dmg3-depth-1 .depth-1 {border:<?php echo $this->_vars['setting']['style1']['border']; ?>px solid #fef8ef;display:block;height:28px;background:url("<?php echo $this->_plugins['function']['respath'][0]->_respath(array('type' => "widgets",'name' => "duce_goodscat"), $this);?>images/dmg3-icon.gif") no-repeat 0 -115px;font-size:14px;padding-left:22px;color:<?php echo $this->_vars['setting']['style1']['color']; ?>;overflow:hidden;} .dmg3-depth-1 .depth-1 em{display:block;width:176px;height:23px;background:url("<?php echo $this->_plugins['function']['respath'][0]->_respath(array('type' => "widgets",'name' => "duce_goodscat"), $this);?>images/dmg3-icon.gif") no-repeat right -83px;padding-top:5px;cursor:pointer;} .dmg3-depth-1 .depth-1 em.nosub{background-position:right -207px;} .dmg3-depth-1 .depth-1:hover {text-decoration:none;} .ducegMenu-3 .hover .depth-1{height:28px;position:absolute;width:161px;border-color:<?php echo $this->_vars['setting']['style1']['fbdcolor']; ?>;border-right:none;z-index:1000;font-size:14px;background-color:#fff;} .ducegMenu-3 .hover .depth-1 em{font-weight:700;color:<?php echo $this->_vars['setting']['style1']['hcolor']; ?>;} .dmg3-popup {position:absolute;z-index:999;padding:0;background:#fff url("<?php echo $this->_plugins['function']['respath'][0]->_respath(array('type' => "widgets",'name' => "duce_goodscat"), $this);?>images/dmg3-line.gif") repeat-y <?php echo ((isset($this->_vars['setting']['style1']['width']) && ''!==$this->_vars['setting']['style1']['width'])?$this->_vars['setting']['style1']['width']:450); ?>px 0;border:<?php echo $this->_vars['setting']['style1']['border']; ?>px solid <?php echo $this->_vars['setting']['style1']['fbdcolor']; ?>;margin-left:183px;} .dmg3-drop-3 {float:left;width:<?php echo ((((isset($this->_vars['setting']['style1']['width']) && ''!==$this->_vars['setting']['style1']['width'])?$this->_vars['setting']['style1']['width']:450))-20);?>px;padding:4px 10px 6px;} .dmg3-drop-3 dl.sub {float:left;width:<?php echo ((((isset($this->_vars['setting']['style1']['width']) && ''!==$this->_vars['setting']['style1']['width'])?$this->_vars['setting']['style1']['width']:450))-20);?>px;border-bottom:1px solid #e8e8e8;padding:4px 0 6px;line-height:22px;} .dmg3-drop-3 .last{border-bottom:none;} .dmg3-drop-3 dl.sub dt {float:left;text-align:right;width:78px;font-weight:700;padding:3px 6px 0 0;overflow:hidden;} .dmg3-drop-3 dl.sub dt a{white-space:nowrap;color:#c00;font-weight:700;} .dmg3-drop-3 dl.sub dd{float:left;width:<?php echo ((((isset($this->_vars['setting']['style1']['width']) && ''!==$this->_vars['setting']['style1']['width'])?$this->_vars['setting']['style1']['width']:450))-90);?>px;padding:3px 6px 0 0;} .dmg3-drop-3 dl.sub dd em{float:left;padding-left:6px;border-left:1px solid #ccc;height:14px;line-height:14px;margin:4px 6px 4px 0;color:<?php echo $this->_vars['setting']['style1']['fcolor']; ?>;white-space:nowrap;} .dmg3-drop-3 dl.sub dd a:hover em{color:<?php echo $this->_vars['setting']['style1']['fhcolor']; ?>;} .dmg3-drop-3 .subhot dt{color:#f60;} .dmg3-drop-b {float:left;padding:12px 10px 10px;width:<?php echo ((((isset($this->_vars['setting']['style1']['tagtreewidth']) && ''!==$this->_vars['setting']['style1']['tagtreewidth'])?$this->_vars['setting']['style1']['tagtreewidth']:180))-20);?>px;} .dmg3-drop-b a {display:block;white-space:nowrap;height:21px;line-height:20px;*line-height:24px; _line-height:21px; color:#333;overflow:hidden;} .dmg3-drop-b .depth-2 {font-weight:700;border-bottom:1px solid #f2eae3;padding-bottom:6px;margin-bottom:6px;} .dmg3-drop-b ul.sub {position:relative;z-index:198;} .dmg3-drop-b ul.sub .depth-2, .dmg3-drop-b ul.sub .depth-2:hover {border-color:#d7e1ea;color:<?php echo $this->_vars['setting']['style1']['tagtreefont']; ?>;} .dmg3-drop-b ul.sub .all{display:inline;position:absolute;right:0;top:-1px;font-weight:700;} .dmg3-drop-b ul.sub {padding:2px 0 6px;} .dmg3-drop-b ul.sub li a {display:block;height:22px;color:#666;padding-left:5px;font-family:Verdana,Tahoma,Geneva,Helvetica,Arial,sans-serif;overflow:hidden; font-size:12px;} .dmg3-drop-b ul.sub li a:hover {color:<?php echo $this->_vars['setting']['style1']['tagtreefont']; ?>;background-color:<?php echo $this->_vars['setting']['style1']['tagtreebg']; ?>;text-decoration:none;} .dmg3-drop-b ul.sub li .depth-2:hover {color:<?php echo $this->_vars['setting']['style1']['fhcolor']; ?>;} .dmg3-drop-b .tagtree {border-top:1px solid #d7e1ea;padding:8px 0;margin-top:3px;} .dmg3-drop-b .tagtree a {color:#c00;} .ducegMenu-3 .cat-custom, .ducegMenu-3 .cat-custom a, .ducegMenu-3 .cat-custom a em, .ducegMenu-3 .cat-custom a.depth-1 em.nosub{background:#fdf1de;height:28px;font-size:12px;border:none;} .dmg3-drop-3 dl.sub dd{width:302px;} .borderqb {background:#fdf1de; } /*--全部商品分类背景色--*/ </style> <?php $this->_vars["_show"]=$this->_vars['setting']['show']; ?> <div class="ducegMenu-3 clearfix"> <div class="dmg3-depth-0 <?php if( $this->_vars['_show'] ){ ?>onDmg3<?php } ?>"><a class="depth-0" href="<?php echo $this->_env_vars['base_url'],"gallery",(((is_numeric('gallery') && 'index'==grid) || !grid)?'':'-'.grid),'.html';?>"><strong>全部商品分类</strong></a> <div class="dmg3-popup0" <?php if( !$this->_vars['_show'] ){ ?>style="display:none;"<?php } ?>> <ul class="c"> <?php $this->_env_vars['foreach'][catslist]=array('total'=>count($this->_vars['data']),'iteration'=>0);foreach ((array)$this->_vars['data'] as $this->_vars['parentId'] => $this->_vars['parent']){ $this->_env_vars['foreach'][catslist]['first'] = ($this->_env_vars['foreach'][catslist]['iteration']==0); $this->_env_vars['foreach'][catslist]['iteration']++; $this->_env_vars['foreach'][catslist]['last'] = ($this->_env_vars['foreach'][catslist]['iteration']==$this->_env_vars['foreach'][catslist]['total']);  if( $this->_env_vars['foreach']['catslist']['iteration'] <= ((isset($this->_vars['setting']['showcatslist']) && ''!==$this->_vars['setting']['showcatslist'])?$this->_vars['setting']['showcatslist']:'0') or $this->_vars['setting']['showcatslist'] == 0 or $this->_vars['_show'] != 'index' ){ ?> <li class="dmg3-depth-1 <?php echo $this->_vars['parent']['classname'];  echo $this->_vars['parent']['curr']; ?> cat_<?php echo $this->_env_vars['foreach']['catslist']['iteration']; ?>"><a class="depth-1 <?php echo $this->_vars['parent']['onSel']; ?>" href="<?php if( !$this->_vars['parent']['url'] ){  echo $this->_env_vars['base_url'],"gallery-{$this->_vars['parentId']}",(((is_numeric($this->_vars['parentId']) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html'; }else{  echo $this->_vars['parent']['url'];  } ?>"><em <?php if( !$this->_vars['parent']['sub'] ){ ?> class="nosub"<?php } ?>><?php echo $this->_vars['parent']['label']; ?></em></a> <?php if( $this->_vars['parent']['sub'] ){ ?> <div class="dmg3-popup" style="display:none;width:<?php if( $this->_vars['parent']['brands'] ){  echo ((((isset($this->_vars['setting']['style1']['width']) && ''!==$this->_vars['setting']['style1']['width'])?$this->_vars['setting']['style1']['width']:450))+(((isset($this->_vars['setting']['style1']['tagtreewidth']) && ''!==$this->_vars['setting']['style1']['tagtreewidth'])?$this->_vars['setting']['style1']['tagtreewidth']:180))); }else{  echo ((isset($this->_vars['setting']['style1']['width']) && ''!==$this->_vars['setting']['style1']['width'])?$this->_vars['setting']['style1']['width']:450);  } ?>px;"> <div class="dmg3-drop-3"> <?php if( $this->_vars['parent']['hotcats'] ){ ?> <dl class="subhot"> <dt><?php echo ((isset($this->_vars['setting']['hottitle']{$this->_vars['parent']['cat_id']}) && ''!==$this->_vars['setting']['hottitle']{$this->_vars['parent']['cat_id']})?$this->_vars['setting']['hottitle']{$this->_vars['parent']['cat_id']}:'热门分类'); ?></dt> <dd> <em><a href="<?php echo $this->_env_vars['base_url'],"gallery-{$this->_vars['parent']['cat_id']}--1",(((is_numeric(1) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html';?>">最新商品</a></em> <em><a href="<?php echo $this->_env_vars['base_url'],"gallery-{$this->_vars['parent']['cat_id']}--8",(((is_numeric(8) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html';?>">畅销排行</a></em> <?php foreach ((array)$this->_vars['parent']['hotcats'] as $this->_vars['hotcat']){ ?> <em><a href="<?php echo $this->_vars['hotcat']['url']; ?>"><?php echo $this->_vars['hotcat']['label']; ?></a></em> <?php } ?> </dd> <div class="clear"></div> </dl> <?php }  $this->_env_vars['foreach'][subcat]=array('total'=>count($this->_vars['parent']['sub']),'iteration'=>0);foreach ((array)$this->_vars['parent']['sub'] as $this->_vars['childId'] => $this->_vars['child']){ $this->_env_vars['foreach'][subcat]['first'] = ($this->_env_vars['foreach'][subcat]['iteration']==0); $this->_env_vars['foreach'][subcat]['iteration']++; $this->_env_vars['foreach'][subcat]['last'] = ($this->_env_vars['foreach'][subcat]['iteration']==$this->_env_vars['foreach'][subcat]['total']); ?> <dl class="sub <?php if( $this->_env_vars['foreach']['subcat']['last'] ){ ?>last<?php } ?>"> <dt> <a class="depth-2 <?php echo $this->_vars['child']['onSel']; ?>" href="<?php if( !$this->_vars['child']['url'] ){  echo $this->_env_vars['base_url'],"gallery-{$this->_vars['childId']}",(((is_numeric($this->_vars['childId']) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html'; }else{  echo $this->_vars['child']['url'];  } ?>"><?php echo $this->_vars['child']['label']; ?></a> </dt> <?php if( $this->_vars['setting']['ducemenu_1_loop'] == '3' && $this->_vars['child']['sub'] ){ ?> <dd> <?php $this->_env_vars['foreach'][childnum]=array('total'=>count($this->_vars['child']['sub']),'iteration'=>0);foreach ((array)$this->_vars['child']['sub'] as $this->_vars['gChildId'] => $this->_vars['gChild']){ $this->_env_vars['foreach'][childnum]['first'] = ($this->_env_vars['foreach'][childnum]['iteration']==0); $this->_env_vars['foreach'][childnum]['iteration']++; $this->_env_vars['foreach'][childnum]['last'] = ($this->_env_vars['foreach'][childnum]['iteration']==$this->_env_vars['foreach'][childnum]['total']);  if( $this->_env_vars['foreach']['childnum']['iteration'] <= $this->_vars['setting']['gshowmax'] or $this->_vars['setting']['gshowmax'] == 0 ){ ?> <em><a class="<?php echo $this->_vars['gChild']['onSel']; ?>" href="<?php if( !$this->_vars['gChild']['url'] ){  echo $this->_env_vars['base_url'],"gallery-{$this->_vars['gChildId']}",(((is_numeric($this->_vars['gChildId']) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html'; }else{  echo $this->_vars['gChild']['url'];  } ?>"><?php echo $this->_vars['gChild']['label']; ?></a></em> <?php }else{ ?> <em><a href="<?php if( !$this->_vars['parent']['url'] ){  echo $this->_env_vars['base_url'],"gallery-{$this->_vars['parentId']}",(((is_numeric($this->_vars['parentId']) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html'; }else{  echo $this->_vars['parent']['url'];  } ?>">更多&gt;&gt;</a></em> <?php break;  }  } unset($this->_env_vars['foreach'][childnum]); ?> </dd> <?php } ?> <div class="clear"></div> </dl> <?php } unset($this->_env_vars['foreach'][subcat]); ?> </div> <?php if( $this->_vars['parent']['brands'] ){ ?> <div class="dmg3-drop-b"> <h3><a class="depth-2"><?php echo ((isset($this->_vars['setting']['brandtitle'][$this->_vars['parent']]['cat_id']) && ''!==$this->_vars['setting']['brandtitle'][$this->_vars['parent']]['cat_id'])?$this->_vars['setting']['brandtitle'][$this->_vars['parent']]['cat_id']:'热门品牌'); ?></a></h3> <ul class="sub"> <?php echo tpl_function_counter(array('start' => 1,'assign' => "maxshow",'print' => false), $this); foreach ((array)$this->_vars['parent']['brands'] as $this->_vars['brandId'] => $this->_vars['brand']){  $this->_vars[brand_id]="b,".$this->_vars['brand']['id'];  if( $this->_vars['brand']['name'] ){ ?><li><a href="<?php echo $this->_env_vars['base_url'],"gallery-{$this->_vars['parent']['cat_id']}-{$this->_vars['brand_id']}",(((is_numeric($this->_vars['brand_id']) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html';?>"><?php echo $this->_vars['brand']['name']; ?></a></li><?php }  echo tpl_function_counter(array('assign' => "maxshow",'print' => false), $this); if( $this->_vars['maxshow'] > $this->_vars['setting']['brandshow'] ){  break;  }  } ?> </ul> <?php if( $this->_vars['parent']['tag'] ){ ?> <ul class="tagtree"> <?php foreach ((array)$this->_vars['parent']['tag'] as $this->_vars['tag']){  $this->_vars["tagid"]='t,'.$this->_vars['tag']['id']; ?> <li><a href="<?php echo $this->_env_vars['base_url'],"gallery-{$this->_vars['parent']['cat_id']}-{$this->_vars['tagid']}",(((is_numeric($this->_vars['tagid']) && 'index'==$this->_vars['setting']['view']) || !$this->_vars['setting']['view'])?'':'-'.$this->_vars['setting']['view']),'.html';?>"><?php echo $this->_vars['tag']['name']; ?></a></li> <?php } ?> </ul> <?php } ?> </div> <?php } ?> </div> <?php } ?> </li> <?php }else{  break;  }  } unset($this->_env_vars['foreach'][catslist]); ?> </ul> <li class="b"></li></div> </div> </div> <script src="<?php echo $this->_plugins['function']['respath'][0]->_respath(array('type' => "widgets",'name' => "duce_goodscat"), $this);?>images/dmg3.pack.js" type="text/javascript"></script> 